@* NestedComponent.razor - A test component to verify markers work correctly *@

<div style="border: 2px solid #2196F3; padding: 15px; margin: 10px 0; border-radius: 5px; background: #f5f5f5;">
    <h4 style="margin-top: 0; color: #2196F3;">@Title</h4>

    @if (!string.IsNullOrEmpty(Description))
    {
        <p style="color: #666;">@Description</p>
    }

    <div style="margin: 10px 0;">
        <button @onclick="IncrementCounter" style="padding: 5px 10px; margin-right: 10px;">
            Click me
        </button>
        <span>Button clicked @counter times</span>
    </div>

    @if (ShowTimestamp)
    {
        <div style="font-size: 0.9em; color: #999; margin-top: 10px;">
            Last interaction: @lastInteraction.ToString("HH:mm:ss")
        </div>
    }

    @if (ChildContent != null)
    {
        <div style="border-top: 1px dashed #ccc; margin-top: 10px; padding-top: 10px;">
            @ChildContent
        </div>
    }
</div>

@code {
    [Parameter]
    public string Title { get; set; } = "Nested Component";

    [Parameter]
    public string Description { get; set; } = "This is a real component that should get markers";

    [Parameter]
    public bool ShowTimestamp { get; set; } = true;

    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    private int counter = 0;
    private DateTime lastInteraction = DateTime.Now;

    private void IncrementCounter()
    {
        counter++;
        lastInteraction = DateTime.Now;
        StateHasChanged();
    }

    protected override void OnInitialized()
    {
        Console.WriteLine($"NestedComponent initialized with title: {Title}");
    }
}