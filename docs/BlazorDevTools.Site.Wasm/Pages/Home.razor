@attribute [Route(PagesRoutes.Home)]
@inject IJSRuntime JSRuntime
@inject NavigationManager NavigationManager
@inject IDialogService DialogService

<PageTitle>Blazor Developer Tools</PageTitle>

<MudContainer MaxWidth="MaxWidth.Large" Class="@(_isDesktop ? "mt-8" : "mt-4 px-2")">
    @* Hero Section *@
    <MudGrid Justify="Justify.Center" Class="mb-12">
        <MudItem xs="12" md="10" lg="8">
            <MudStack Spacing="4" AlignItems="AlignItems.Center">

                <MudImage Src="/images/logo.png" Width="@(_isDesktop ? 200 : 150)" />

                <MudText Typo="Typo.h2" Align="Align.Center" GutterBottom="false">
                    Blazor Developer Tools
                </MudText>

                <MudText Typo="Typo.h5" Align="Align.Center" Color="Color.Secondary">
                    Razor in your browser
                </MudText>

                <MudStack Row="@_isDesktop"
                          Spacing="2"
                          Class="mt-4 hero-buttons"
                          AlignItems="AlignItems.Center">
                    <MudButton Variant="Variant.Filled"
                               Color="Color.Primary"
                               Size="@(_isDesktop ? Size.Large : Size.Medium)"
                               FullWidth="@(!_isDesktop)"
                               StartIcon="@Icons.Material.Filled.Download"
                               OnClick="@OnClickGetExtension">
                        Install Extension
                    </MudButton>
                    <MudButton Variant="Variant.Outlined"
                               Color="Color.Primary"
                               Size="@(_isDesktop ? Size.Large : Size.Medium)"
                               FullWidth="@(!_isDesktop)"
                               StartIcon="@Icons.Material.Filled.Code"
                               Href="https://www.nuget.org/packages/BlazorDeveloperTools"
                               Target="_blank">
                        NuGet Package
                    </MudButton>
                    <MudButton Variant="Variant.Outlined"
                               Color="Color.Primary"
                               Size="@(_isDesktop ? Size.Large : Size.Medium)"
                               FullWidth="@(!_isDesktop)"
                               StartIcon="@Icons.Custom.Brands.GitHub"
                               Href="https://github.com/joe-gregory/blazor-devtools"
                               Target="_blank">
                        View on GitHub
                    </MudButton>
                </MudStack>
            </MudStack>
        </MudItem>
    </MudGrid>
    @* Try Now! *@
    <MudGrid Justify="Justify.Center" Class="mb-8">
        <MudItem xs="12" md="10" lg="8">
            <MudCard Elevation="4" Style="border: 2px solid var(--mud-palette-primary); background: linear-gradient(135deg, var(--mud-palette-primary-lighten) 0%, var(--mud-palette-surface) 100%);">
                <MudCardContent Class="py-4">
                    <MudStack Row="@_isDesktop" Spacing="3" AlignItems="AlignItems.Center" Justify="Justify.Center">
                        <MudIcon Icon="@Icons.Material.Filled.TipsAndUpdates"
                                 Size="Size.Large"
                                 Color="Color.Primary" />
                        <MudStack Spacing="1" Style="flex: 1;">
                            <MudText Typo="Typo.h6" Color="Color.Primary">
                                🚀 Try BDT Right Now!
                            </MudText>
                            <MudText Typo="Typo.body1">
                                <MudLink OnClick="@OnClickGetExtension" Style="cursor: pointer; text-decoration: underline; font-weight: bold;">
                                    Install the browser extension
                                </MudLink>
                                and inspect this very website to see Blazor Developer Tools in action!
                            </MudText>
                        </MudStack>
                    </MudStack>
                </MudCardContent>
            </MudCard>
        </MudItem>
    </MudGrid>
    @* Video Section *@
    <MudGrid Justify="Justify.Center" Class="mb-12">
        <MudItem xs="12" md="10" lg="8">
            <MudPaper Elevation="4" Class="pa-4">
                <MudStack Spacing="3">
                    <MudText Typo="Typo.h4" Align="Align.Center">
                        See It In Action
                    </MudText>

                    @* Placeholder for video - replace with actual YouTube embed when ready *@
                    @* <MudCard>
                        <MudCardContent>
                            <MudStack AlignItems="AlignItems.Center" Justify="Justify.Center" Style="height: 400px; background-color: var(--mud-palette-background-grey);">
                                <MudIcon Icon="@Icons.Material.Filled.PlayCircleOutline" Style="font-size: 5rem;" Color="Color.Primary" />
                                <MudText Typo="Typo.h6" Color="Color.Secondary">Demo Video Coming Soon</MudText>
                            </MudStack>
                        </MudCardContent>
                    </MudCard> *@

                    @* When you have the YouTube URL, replace above with: *@
                    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
                        <iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
                                src="https://www.youtube.com/embed/o4dgkPSndWE"
                                title="YouTube video player"
                                frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                referrerpolicy="strict-origin-when-cross-origin"
                                allowfullscreen>
                        </iframe>
                    </div>
                   
                </MudStack>
            </MudPaper>
        </MudItem>
    </MudGrid>
    @* Beta Release Section *@
    <MudGrid Justify="Justify.Center" Class="mb-12">
        <MudItem xs="12" md="10" lg="8">
            <MudPaper Elevation="3" Class="pa-6">
                <MudText Typo="Typo.h4" GutterBottom="true">
                    <MudIcon Icon="@Icons.Material.Filled.Rocket" Class="mr-2" />
                    Announcing BDT v0.9.x Beta Release
                </MudText>
                <MudDivider Class="my-4" />

                <MudText Typo="Typo.body1" Class="mb-4">
                    I'm happy to announce the first beta release of BDT! This initial version (0.9.x)
                    is the MVP - it's far from what I would like it to be, but it's a start.
                </MudText>

                <MudText Typo="Typo.body1" Class="mb-4">
                    Looking ahead, I envision features like displaying component property values in real-time
                    while the app is running, and much more. This first release has plenty of shortcomings,
                    but I believe it's best to release early and iterate along the way.
                </MudText>

                <MudAlert Severity="Severity.Success" Class="my-4">
                    I'm excited and happy to finally share this with you!
                </MudAlert>

                <MudText Typo="Typo.body1" Class="mb-4">
                    If you'd like to contribute or report an issue, please visit the GitHub repository:
                </MudText>

                <MudButton Variant="Variant.Filled"
                           Color="Color.Primary"
                           StartIcon="@Icons.Custom.Brands.GitHub"
                           Href="https://github.com/joe-gregory/blazor-devtools"
                           Target="_blank">
                    View on GitHub
                </MudButton>
            </MudPaper>
        </MudItem>
    </MudGrid>
    @* What Is It Section *@
    <MudGrid Justify="Justify.Center" Class="mb-12">
        <MudItem xs="12" md="10" lg="8">
            <MudStack Spacing="4">
                <MudText Typo="Typo.h4" Align="Align.Center">
                    What Is Blazor Developer Tools?
                </MudText>

                <MudText Typo="Typo.body1" Align="Align.Center">
                    Blazor Developer Tools bridges the gap between your HTML and your Razor components. Inspect any element to instantly see which component rendered it, navigate your component tree, and debug faster. Free, open source, and Apache 2.0 licensed.
                </MudText>

                <MudGrid Class="mt-4">
                    <MudItem xs="12" md="4">
                        <MudCard Class="h-100">
                            <MudCardContent>
                                <MudStack Spacing="2">
                                    <MudIcon Icon="@Icons.Material.Filled.AccountTree" Size="Size.Large" Color="Color.Primary" />
                                    <MudText Typo="Typo.h6">Component Tree View</MudText>
                                    <MudText Typo="Typo.body2">
                                        Visualize your entire Blazor component hierarchy in a tree structure
                                    </MudText>
                                    <MudImage Src="/images/ComponentTreeView.png" />
                                </MudStack>
                            </MudCardContent>
                        </MudCard>
                    </MudItem>

                    <MudItem xs="12" md="4">
                        <MudCard Class="h-100">
                            <MudCardContent>
                                <MudStack Spacing="2">
                                    <MudIcon Icon="@Icons.Material.Filled.Search" Size="Size.Large" Color="Color.Primary" />
                                    <MudText Typo="Typo.h6">Component Inspector</MudText>
                                    <MudText Typo="Typo.body2">
                                        Select components in the page and see their details instantly
                                    </MudText>
                                    <MudImage Src="/images/ComponentInspector.png" />
                                </MudStack>
                            </MudCardContent>
                        </MudCard>
                    </MudItem>

                    <MudItem xs="12" md="4">
                        <MudCard Class="h-100">
                            <MudCardContent>
                                <MudStack Spacing="2">
                                    <MudIcon Icon="@Icons.Material.Filled.Speed" Size="Size.Large" Color="Color.Primary" />
                                    <MudText Typo="Typo.h6">Detailed Info</MudText>
                                    <MudText Typo="Typo.body2">
                                        Click on a component to get file location and additional information.
                                    </MudText>
                                    <MudImage Src="/images/ComponentInfo.png" />
                                </MudStack>
                            </MudCardContent>
                        </MudCard>
                    </MudItem>
                </MudGrid>
            </MudStack>
        </MudItem>
    </MudGrid>

    @* Installation Section *@
    <MudGrid Justify="Justify.Center" Class="mb-12">
        <MudItem xs="12" md="10" lg="8">
            <MudStack Spacing="4">
                <MudText Typo="Typo.h4" Align="Align.Center">
                    Quick Start
                </MudText>

                <MudText Typo="Typo.body1" Align="Align.Center" Color="Color.Secondary">
                    Get up and running in 2 simple steps
                </MudText>

                <MudTimeline TimelineOrientation="TimelineOrientation.Vertical"
                             TimelinePosition="@(_isDesktop ? TimelinePosition.Alternate : TimelinePosition.Start)"
                             Class="mt-4">
                    <MudTimelineItem Color="Color.Primary" Size="Size.Large">
                        <ItemContent>
                            <MudCard Elevation="3">
                                <MudCardContent>
                                    <MudStack Spacing="2">
                                        <MudText Typo="Typo.h5">
                                            <MudIcon Icon="@Icons.Material.Filled.Code" Class="mr-2" />
                                            1. Install NuGet Package
                                        </MudText>
                                        <MudText Typo="Typo.body1">
                                            Add the BlazorDeveloperTools package to your Blazor project:
                                        </MudText>
                                        <MudPaper Class="pa-3" Style="background-color: var(--mud-palette-background-grey);">
                                            <code>dotnet add package BlazorDeveloperTools</code>
                                        </MudPaper>
                                        <MudButton Variant="Variant.Outlined"
                                                   Color="Color.Primary"
                                                   StartIcon="@Icons.Material.Filled.OpenInNew"
                                                   Href="https://www.nuget.org/packages/BlazorDeveloperTools"
                                                   Target="_blank">
                                            View on NuGet
                                        </MudButton>
                                    </MudStack>
                                </MudCardContent>
                            </MudCard>
                        </ItemContent>
                    </MudTimelineItem>

                    <MudTimelineItem Color="Color.Primary" Size="Size.Large">
                        <ItemContent>
                            <MudCard Elevation="3">
                                <MudCardContent>
                                    <MudStack Spacing="2">
                                        <MudText Typo="Typo.h5">
                                            <MudIcon Icon="@Icons.Material.Filled.Extension" Class="mr-2" />
                                            2. Install Browser Extension
                                        </MudText>
                                        <MudText Typo="Typo.body1">
                                            Add the extension to Chrome or Edge from your browser's web store.
                                        </MudText>
                                        <MudButton Variant="Variant.Filled"
                                                   Color="Color.Primary"
                                                   StartIcon="@Icons.Material.Filled.Download"
                                                   OnClick="@OnClickGetExtension"
                                                   Size="Size.Large">
                                            Install Extension
                                        </MudButton>
                                    </MudStack>
                                </MudCardContent>
                            </MudCard>
                        </ItemContent>
                    </MudTimelineItem>
                </MudTimeline>

                <MudAlert Severity="Severity.Success" Class="mt-4">
                    <MudText Typo="Typo.body1">
                        <strong>That's it!</strong> Open your Blazor app, press F12, and look for the "Blazor" tab in DevTools.
                    </MudText>
                </MudAlert>
            </MudStack>
        </MudItem>
    </MudGrid>
    @* Render Mode Installation Section *@
    <MudGrid Justify="Justify.Center" Class="mb-12">
        <MudItem xs="12" md="10" lg="8">
            <MudStack Spacing="4">
                <MudText Typo="Typo.h4" Align="Align.Center">
                    Installation by Render Mode
                </MudText>

                <MudText Typo="Typo.body1" Align="Align.Center" Color="Color.Secondary">
                    Different Blazor render modes require slightly different installation approaches
                </MudText>

                <MudGrid Class="mt-4">
                    @* WebAssembly Standalone *@
                    <MudItem xs="12" md="6">
                        <MudCard Elevation="3" Style="height: 100%;">
                            <MudCardContent>
                                <MudStack Spacing="3">
                                    <MudIcon Icon="@Icons.Material.Filled.Public"
                                             Size="Size.Large"
                                             Color="Color.Primary" />
                                    <MudText Typo="Typo.h6">WebAssembly Standalone</MudText>
                                    <MudText Typo="Typo.body2">
                                        Simply install the NuGet package in your main project:
                                    </MudText>
                                    <MudPaper Class="pa-3" Style="background-color: var(--mud-palette-background-grey);">
                                        <code>dotnet add package BlazorDeveloperTools</code>
                                    </MudPaper>
                                </MudStack>
                            </MudCardContent>
                        </MudCard>
                    </MudItem>

                    @* Global Server *@
                    <MudItem xs="12" md="6">
                        <MudCard Elevation="3" Style="height: 100%;">
                            <MudCardContent>
                                <MudStack Spacing="3">
                                    <MudIcon Icon="@Icons.Material.Filled.Storage"
                                             Size="Size.Large"
                                             Color="Color.Primary" />
                                    <MudText Typo="Typo.h6">Global Server</MudText>
                                    <MudText Typo="Typo.body2">
                                        Simply install the NuGet package in your main project:
                                    </MudText>
                                    <MudPaper Class="pa-3" Style="background-color: var(--mud-palette-background-grey);">
                                        <code>dotnet add package BlazorDeveloperTools</code>
                                    </MudPaper>
                                </MudStack>
                            </MudCardContent>
                        </MudCard>
                    </MudItem>

                    @* Auto Render - WebAssembly Global *@
                    <MudItem xs="12" md="6">
                        <MudCard Elevation="3" Style="height: 100%;">
                            <MudCardContent>
                                <MudStack Spacing="3">
                                    <MudIcon Icon="@Icons.Material.Filled.AutoAwesome"
                                             Size="Size.Large"
                                             Color="Color.Primary" />
                                    <MudText Typo="Typo.h6">Auto Render (WebAssembly Global)</MudText>
                                    <MudText Typo="Typo.body2">
                                        Install the package in your <strong>.Client</strong> project only:
                                    </MudText>
                                    <MudPaper Class="pa-3" Style="background-color: var(--mud-palette-background-grey);">
                                        <code>cd YourProject.Client<br />dotnet add package BlazorDeveloperTools</code>
                                    </MudPaper>
                                </MudStack>
                            </MudCardContent>
                        </MudCard>
                    </MudItem>

                    @* Auto Render - Both Server and Client *@
                    <MudItem xs="12" md="6">
                        <MudCard Elevation="3" Style="height: 100%;">
                            <MudCardContent>
                                <MudStack Spacing="3">
                                    <MudIcon Icon="@Icons.Material.Filled.DynamicFeed"
                                             Size="Size.Large"
                                             Color="Color.Primary" />
                                    <MudText Typo="Typo.h6">Auto Render (Server + Client)</MudText>
                                    <MudText Typo="Typo.body2">
                                        Install the package in both your <strong>main</strong> project and <strong>.Client</strong> project:
                                    </MudText>
                                    <MudPaper Class="pa-3" Style="background-color: var(--mud-palette-background-grey);">
                                        <code>dotnet add package BlazorDeveloperTools<br />cd YourProject.Client<br />dotnet add package BlazorDeveloperTools</code>
                                    </MudPaper>
                                </MudStack>
                            </MudCardContent>
                        </MudCard>
                    </MudItem>
                </MudGrid>

                @* Demo Projects Info *@
                <MudAlert Severity="Severity.Info" Class="mt-4">
                    <MudText Typo="Typo.body1">
                        <strong>Need examples?</strong> Check out the <code>demos/</code> folder in the GitHub repository,
                        which contains 4 demo projects showcasing installation for each render mode.
                    </MudText>
                </MudAlert>

                <MudButton Variant="Variant.Outlined"
                           Color="Color.Primary"
                           StartIcon="@Icons.Material.Filled.FolderOpen"
                           Href="https://github.com/joe-gregory/blazor-devtools/tree/master/demos"
                           Target="_blank"
                           Class="mt-2">
                    View Demo Projects
                </MudButton>
            </MudStack>
        </MudItem>
    </MudGrid>
    @* How to Use Section *@
    <MudGrid Justify="Justify.Center" Class="mb-12">
        <MudItem xs="12" md="10" lg="8">
            <MudStack Spacing="4">
                <MudText Typo="Typo.h4" Align="Align.Center">
                    How to Use
                </MudText>

                <MudText Typo="Typo.body1" Align="Align.Center" Color="Color.Secondary">
                    Start inspecting your Blazor components in seconds
                </MudText>

                <MudGrid Class="mt-4" Justify="Justify.Center">
                    <MudItem xs="12" sm="6" md="4">
                        <MudPaper Class="pa-6" Elevation="2" Style="height: 100%;">
                            <MudStack Spacing="3" AlignItems="AlignItems.Center">
                                <MudIcon Icon="@Icons.Material.Filled.RocketLaunch"
                                         Size="Size.Large"
                                         Color="Color.Primary" />
                                <MudText Typo="Typo.h6" Align="Align.Center">
                                    1. Launch Your App
                                </MudText>
                                <MudText Typo="Typo.body2" Align="Align.Center">
                                    Run your Blazor application in Chrome or Edge
                                </MudText>
                            </MudStack>
                        </MudPaper>
                    </MudItem>

                    <MudItem xs="12" sm="4">
                        <MudPaper Class="pa-6" Elevation="2" Style="height: 100%;">
                            <MudStack Spacing="3" AlignItems="AlignItems.Center">
                                <MudIcon Icon="@Icons.Material.Filled.DeveloperMode"
                                         Size="Size.Large"
                                         Color="Color.Primary" />
                                <MudText Typo="Typo.h6" Align="Align.Center">
                                    2. Open DevTools
                                </MudText>
                                <MudText Typo="Typo.body2" Align="Align.Center">
                                    Right-click and select "Inspect" or press F12
                                </MudText>
                            </MudStack>
                        </MudPaper>
                    </MudItem>

                    <MudItem xs="12" sm="4">
                        <MudPaper Class="pa-6" Elevation="2" Style="height: 100%;">
                            <MudStack Spacing="3" AlignItems="AlignItems.Center">
                                <MudIcon Icon="@Icons.Material.Filled.Tab"
                                         Size="Size.Large"
                                         Color="Color.Primary" />
                                <MudText Typo="Typo.h6" Align="Align.Center">
                                    3. Find Blazor Tab
                                </MudText>
                                <MudText Typo="Typo.body2" Align="Align.Center">
                                    Look for the "Blazor" tab in DevTools
                                </MudText>
                            </MudStack>
                        </MudPaper>
                    </MudItem>
                </MudGrid>

                <MudDivider Class="my-6" />

                <MudText Typo="Typo.body1" Align="Align.Center">
                    <strong>Pro tip:</strong> Click the picker tool in the Blazor tab to select elements
                    and see which component rendered them.
                </MudText>
            </MudStack>
        </MudItem>
    </MudGrid>
    @* How to Customize Section *@
    <MudGrid Justify="Justify.Center" Class="mb-12">
        <MudItem xs="12" md="10" lg="8">
            <MudStack Spacing="4">
                <MudText Typo="Typo.h4" Align="Align.Center">
                    Configuration Options
                </MudText>

                <MudText Typo="Typo.body1" Align="Align.Center" Color="Color.Secondary">
                    Customize Blazor Developer Tools to fit your workflow
                </MudText>

                <MudGrid Class="mt-4">
                    @* Debug vs Production *@
                    <MudItem xs="12" md="6">
                        <MudCard Elevation="3" Style="height: 100%;">
                            <MudCardContent>
                                <MudStack Spacing="3">
                                    <MudIcon Icon="@Icons.Material.Filled.Settings"
                                             Size="Size.Large"
                                             Color="Color.Primary" />
                                    <MudText Typo="Typo.h6">Enable in Production</MudText>
                                    <MudText Typo="Typo.body2">
                                        By default, BDT only runs in Debug mode. To enable it in Release/Production builds,
                                        add this to your <code>.csproj</code> file:
                                    </MudText>
                                    <MudPaper Class="pa-3" Style="background-color: var(--mud-palette-background-grey); max-width: 100%; overflow-x: auto;">
                                        <pre style="margin: 0; font-size: 0.875rem;"><code>&lt;PropertyGroup&gt;
  &lt;EnableBlazorDevToolsInProduction&gt;true&lt;/EnableBlazorDevToolsInProduction&gt;
&lt;/PropertyGroup&gt;</code></pre>
                                    </MudPaper>
                                </MudStack>
                            </MudCardContent>
                        </MudCard>
                    </MudItem>

                    @* Skip Components *@
                    <MudItem xs="12" md="6">
                        <MudCard Elevation="3" Style="height: 100%;">
                            <MudCardContent>
                                <MudStack Spacing="3">
                                    <MudIcon Icon="@Icons.Material.Filled.Block"
                                             Size="Size.Large"
                                             Color="Color.Primary" />
                                    <MudText Typo="Typo.h6">Skip Problematic Components</MudText>
                                    <MudText Typo="Typo.body2">
                                        Some components may have issues with BDT's markers. Skip them by adding
                                        this to your <code>.csproj</code> file:
                                    </MudText>
                                    <MudPaper Class="pa-3" Style="background-color: var(--mud-palette-background-grey); max-width: 100%; overflow-x: auto;">
                                        <pre style="margin: 0; font-size: 0.875rem;"><code>&lt;PropertyGroup&gt;
  &lt;BdtSkipComponents&gt;ItemContent;MudTimelineItem;MudDialog&lt;/BdtSkipComponents&gt;
&lt;/PropertyGroup&gt;</code></pre>
                                    </MudPaper>
                                    <MudAlert Severity="Severity.Info" Dense="true">
                                        Semicolon-separated list of component names
                                    </MudAlert>
                                </MudStack>
                            </MudCardContent>
                        </MudCard>
                    </MudItem>

                    @* Disable Entirely *@
                    <MudItem xs="12">
                        <MudCard Elevation="2">
                            <MudCardContent>
                                <MudStack Spacing="2">
                                    @* Changed from Row to regular Stack *@
                                    <MudStack Row="true" Spacing="2" AlignItems="AlignItems.Center">
                                        <MudIcon Icon="@Icons.Material.Filled.PowerSettingsNew"
                                                 Color="Color.Secondary" />
                                        <MudText Typo="Typo.subtitle1"><strong>Disable BDT</strong></MudText>
                                    </MudStack>
                                    <MudText Typo="Typo.body2">
                                        To completely disable BDT (even in Debug), set:
                                    </MudText>
                                    <MudPaper Class="pa-2" Style="background-color: var(--mud-palette-background-grey); overflow-x: auto;">
                                        <code style="word-break: break-all;">
                                            &lt;EnableAutomaticMarkers&gt;false&lt;/EnableAutomaticMarkers&gt;
                                        </code>
                                    </MudPaper>
                                </MudStack>
                            </MudCardContent>
                        </MudCard>
                    </MudItem>
                </MudGrid>
            </MudStack>
        </MudItem>
    </MudGrid>
   
</MudContainer>
@* Footer *@
<MudPaper Square="true" Elevation="0" Class="mt-16 py-8" Style="background-color: var(--mud-palette-background-grey);">
    <MudContainer MaxWidth="MaxWidth.Large">
        <MudGrid>
            <MudItem xs="12" md="6">
                <MudStack Spacing="2">
                    <MudText Typo="Typo.h6">Blazor Developer Tools</MudText>
                    <MudText Typo="Typo.body2">
                        Making Blazor debugging easier, one component at a time.
                    </MudText>
                    <MudText Typo="Typo.body2" Color="Color.Secondary">
                        © 2025 Blazor Developer Tools. All rights reserved.
                    </MudText>
                </MudStack>
            </MudItem>

            <MudItem xs="12" md="6">
                <MudStack Row="@_isDesktop"
                          Spacing="3"
                          Justify="@(_isDesktop ? Justify.FlexEnd : Justify.Center)"
                          AlignItems="AlignItems.Center">
                    <MudTooltip Text="Email Us">
                        <MudIconButton Icon="@Icons.Material.Filled.Email"
                                       Color="Color.Primary"
                                       Href="mailto:blazordevelopertools@gmail.com" />
                    </MudTooltip>

                    <MudTooltip Text="Twitter">
                        <MudIconButton Icon="@Icons.Custom.Brands.X"
                                       Color="Color.Primary"
                                       Href="https://x.com/_joe_gregory"
                                       Target="_blank" />
                    </MudTooltip>

                    <MudTooltip Text="YouTube">
                        <MudIconButton Icon="@Icons.Custom.Brands.YouTube"
                                       Color="Color.Primary"
                                       Href=@_youtubeUrl
                                       Target="_blank" />
                    </MudTooltip>

                    <MudTooltip Text="Instagram">
                        <MudIconButton Icon="@Icons.Custom.Brands.Instagram"
                                       Color="Color.Primary"
                                       Href="https://www.instagram.com/blazordevelopertools/"
                                       Target="_blank" />
                    </MudTooltip>

                    <MudTooltip Text="GitHub">
                        <MudIconButton Icon="@Icons.Custom.Brands.GitHub"
                                       Color="Color.Primary"
                                       Href="https://github.com/joe-gregory/blazor-devtools"
                                       Target="_blank" />
                    </MudTooltip>
                </MudStack>
            </MudItem>
        </MudGrid>
    </MudContainer>
</MudPaper>

@code {
    private const string EdgeExtensionUrl = "https://microsoftedge.microsoft.com/addons/detail/blazor-developer-tools/pdggeigaaicabckehkeldfpfikihgcdj";
    private const string ChromeExtensionUrl = "https://chromewebstore.google.com/detail/blazor-developer-tools/pfddbenemjnlceffaemllejnjbobadhp";
    private const string _youtubeUrl = "https://www.youtube.com/@BlazorDeveloperTools";
    private bool _isDesktop = true;

    private DialogOptions _dialogOptions = new()
    {
        CloseOnEscapeKey = true,
        MaxWidth = MaxWidth.Small,
        FullWidth = true
    };
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            try
            {
                var width = await JSRuntime.InvokeAsync<int>("eval", "window.innerWidth");
                _isDesktop = width >= 960; // MudBlazor md breakpoint
                StateHasChanged();
            }
            catch
            {
                // Fallback to desktop layout if JS fails
                _isDesktop = true;
            }
        }
    }
    private async Task OnClickGetExtension()
    {
        try
        {
            // Get user agent string using a proper JS interop call
            var userAgent = await JSRuntime.InvokeAsync<string>("blazorDevTools.getUserAgent");

            if (string.IsNullOrWhiteSpace(userAgent))
            {
                // If we can't get user agent, show dialog
                await OpenDialogAsync();
                return;
            }
            string extensionUrl;

            if (userAgent.Contains("Edg/", StringComparison.OrdinalIgnoreCase))
            {
                // Edge browser detected
                extensionUrl = EdgeExtensionUrl;
            }
            else if (userAgent.Contains("Chrome", StringComparison.OrdinalIgnoreCase))
            {
                // Chrome browser detected (includes Brave and other Chromium browsers)
                extensionUrl = ChromeExtensionUrl;
            }
            else
            {
                // Unable to determine browser - show dialog
                await OpenDialogAsync();
                return;
            }

            // Open extension store in new tab
            await JSRuntime.InvokeVoidAsync("blazorDevTools.openInNewTab", extensionUrl);
        }
        catch (Exception ex)
        {
            // If browser detection fails, show dialog
            Console.WriteLine($"Browser detection error: {ex.Message}");
            await OpenDialogAsync();
        }
    }

    private Task OpenDialogAsync()
    {
        var options = new DialogOptions { CloseOnEscapeKey = true };

        return DialogService.ShowAsync<Components.BrowserSelectionDialog>("Browser Selection Dialog", options);
    }
}